<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Derive water level curves — WL_Curve • MultiHazard</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Derive water level curves — WL_Curve"><meta property="og:description" content='Generates water level curves for simulated extreme water levels based on a simulated "intensity".'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MultiHazard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.13</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Draft%201.html">Untitled</a>
    </li>
    <li>
      <a href="../articles/my-vignette.html">my-vignette</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Derive water level curves</h1>

    <div class="hidden name"><code>WL_Curve.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates water level curves for simulated extreme water levels based on a simulated "intensity".</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">WL_Curve</span><span class="op">(</span></span>
<span>  <span class="va">Data</span>,</span>
<span>  <span class="va">Cluster_Max</span>,</span>
<span>  <span class="va">Pre_Low</span>,</span>
<span>  <span class="va">Fol_Low</span>,</span>
<span>  <span class="va">Thres</span>,</span>
<span>  Base_Line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Data</span><span class="op">$</span><span class="va">OsWL</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>  <span class="va">Limit</span>,</span>
<span>  <span class="va">Peak</span>,</span>
<span>  <span class="va">Intensity</span>,</span>
<span>  Length <span class="op">=</span> <span class="fl">144</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">Data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame of the time series with the column containing ocean-side water levels labeled <code>"OsWL"</code>.</p></dd>


<dt id="arg-cluster-max">Cluster_Max<a class="anchor" aria-label="anchor" href="#arg-cluster-max"></a></dt>
<dd><p>Numeric vector containing indexes of peaks in the O-sWL column of <code>Data</code>. If analyzing a sample conditioned on O-sWL derived using <code>Con_Sample_2D()</code> set equal to the <code>$x.con</code> output.</p></dd>


<dt id="arg-pre-low">Pre_Low<a class="anchor" aria-label="anchor" href="#arg-pre-low"></a></dt>
<dd><p>Numeric vector of the indexes of the O-sWL column in <code>Data</code> containing the preceding low water level.</p></dd>


<dt id="arg-fol-low">Fol_Low<a class="anchor" aria-label="anchor" href="#arg-fol-low"></a></dt>
<dd><p>Numeric vector of the indexes of the O-sWL column in <code>Data</code> containing the following low water level.</p></dd>


<dt id="arg-thres">Thres<a class="anchor" aria-label="anchor" href="#arg-thres"></a></dt>
<dd><p>Numeric vector of length one, specifying threshold above which to apply the method. Below the threshold an observed curve with an intensity less than <code>limit</code> is randomly sampled.</p></dd>


<dt id="arg-base-line">Base_Line<a class="anchor" aria-label="anchor" href="#arg-base-line"></a></dt>
<dd><p>Numeric vector of length one, specifying water level about which to calculate the intensity. Default is the mean O-sWL.</p></dd>


<dt id="arg-limit">Limit<a class="anchor" aria-label="anchor" href="#arg-limit"></a></dt>
<dd><p>Numeric vector of length one, specifying an upper limit on the observed water level curve intensities to sample for simulated peaks less than <code>Thres</code>.</p></dd>


<dt id="arg-peak">Peak<a class="anchor" aria-label="anchor" href="#arg-peak"></a></dt>
<dd><p>Numeric vector of simulated peak water levels.</p></dd>


<dt id="arg-intensity">Intensity<a class="anchor" aria-label="anchor" href="#arg-intensity"></a></dt>
<dd><p>Numeric vector of the intensity associated with each simulated <code>Peak</code>.</p></dd>


<dt id="arg-length">Length<a class="anchor" aria-label="anchor" href="#arg-length"></a></dt>
<dd><p>Numeric vector of length one, specifying the length of time over which the water level curve is simulated before (and after) the time of the simulated peak. Total duration of the water level curve is 2*<code>Length</code>+1. Minimum is <code>5</code>. Default is <code>144</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame, where each row contains the water level curve generated for corresponding simulated peak in the <code>Peak</code> input. A vector of the intensity <code>Intensity</code> of the generated water level curve.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="Surge_Criterion.html">Surge_Criterion</a></code> <code><a href="OsWL_Intensity.html">OsWL_Intensity</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#Declustering O-sWL series</span></span></span>
<span class="r-in"><span><span class="va">S13.OsWL.Declust</span> <span class="op">=</span> <span class="fu"><a href="Decluster.html">Decluster</a></span><span class="op">(</span>Data<span class="op">=</span><span class="va">S13.Detrend.df</span><span class="op">$</span><span class="va">OsWL</span>,</span></span>
<span class="r-in"><span>                             SepCrit<span class="op">=</span><span class="fl">24</span><span class="op">*</span><span class="fl">7</span>, u<span class="op">=</span><span class="fl">0.99667</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#Use O-sWL intensity function to obtain index of preceding and following low water levels</span></span></span>
<span class="r-in"><span><span class="va">intensity</span> <span class="op">=</span> <span class="fu"><a href="OsWL_Intensity.html">OsWL_Intensity</a></span><span class="op">(</span>Data<span class="op">=</span><span class="va">S13.Detrend.df</span>,Cluster_Max<span class="op">=</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Four synthetic events</span></span></span>
<span class="r-in"><span><span class="va">sim.peaks</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.4</span>,<span class="fl">4</span>,<span class="fl">4.2</span>,<span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim.intensity</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">38</span>,<span class="fl">48</span>,<span class="fl">120</span>,<span class="fl">140</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Generating the water level curves</span></span></span>
<span class="r-in"><span><span class="va">oswl_ts_oswl</span> <span class="op">=</span> <span class="fu">WL_Curve</span><span class="op">(</span>Data <span class="op">=</span> <span class="va">S13.Detrend.df</span>,</span></span>
<span class="r-in"><span>                        Cluster_Max <span class="op">=</span> <span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span>,</span></span>
<span class="r-in"><span>                        Pre_Low <span class="op">=</span> <span class="va">intensity</span><span class="op">$</span><span class="va">Pre.Low</span>,</span></span>
<span class="r-in"><span>                        Fol_Low <span class="op">=</span> <span class="va">intensity</span><span class="op">$</span><span class="va">Fol.Low</span>,</span></span>
<span class="r-in"><span>                        Thres <span class="op">=</span> <span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">Threshold</span>, Limit <span class="op">=</span> <span class="fl">45</span>,</span></span>
<span class="r-in"><span>                        Peak <span class="op">=</span> <span class="va">sim.peaks</span>,</span></span>
<span class="r-in"><span>                        Intensity <span class="op">=</span> <span class="va">sim.intensity</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot the water level curves of the observed peaks</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">289</span>,</span></span>
<span class="r-in"><span>     <span class="va">S13.Detrend.df</span><span class="op">$</span><span class="va">OsWL</span><span class="op">[</span><span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">-</span><span class="fl">144</span><span class="op">)</span><span class="op">:</span></span></span>
<span class="r-in"><span>                         <span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">+</span><span class="fl">144</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     type<span class="op">=</span><span class="st">'l'</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">-</span><span class="fl">144</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">289</span>,</span></span>
<span class="r-in"><span>        <span class="va">S13.Detrend.df</span><span class="op">$</span><span class="va">OsWL</span><span class="op">[</span><span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">-</span><span class="fl">144</span><span class="op">)</span><span class="op">:</span></span></span>
<span class="r-in"><span>                            <span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">+</span><span class="fl">144</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co">#Superimpose the curves generated for the four synthetic events</span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">289</span>,<span class="va">oswl_ts_oswl</span><span class="op">$</span><span class="va">Series</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span>,col<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="WL_Curve-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Jane.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

