<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Derive water level curves — WL_Curve • MultiHazard</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Derive water level curves — WL_Curve"><meta name="description" content='Generates water level curves for simulated extreme water levels based on a simulated "intensity".'><meta property="og:description" content='Generates water level curves for simulated extreme water levels based on a simulated "intensity".'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MultiHazard</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.13</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/MultiHazard.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Derive water level curves</h1>

      <div class="d-none name"><code>WL_Curve.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates water level curves for simulated extreme water levels based on a simulated "intensity".</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">WL_Curve</span><span class="op">(</span></span>
<span>  <span class="va">Data</span>,</span>
<span>  <span class="va">Cluster_Max</span>,</span>
<span>  <span class="va">Pre_Low</span>,</span>
<span>  <span class="va">Fol_Low</span>,</span>
<span>  <span class="va">Thres</span>,</span>
<span>  Base_Line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Data</span><span class="op">$</span><span class="va">OsWL</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="va">Limit</span>,</span>
<span>  <span class="va">Peak</span>,</span>
<span>  <span class="va">Intensity</span>,</span>
<span>  Length <span class="op">=</span> <span class="fl">144</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">Data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame of the time series with the column containing ocean-side water levels labeled <code>"OsWL"</code>.</p></dd>


<dt id="arg-cluster-max">Cluster_Max<a class="anchor" aria-label="anchor" href="#arg-cluster-max"></a></dt>
<dd><p>Numeric vector containing indexes of peaks in the O-sWL column of <code>Data</code>. If analyzing a sample conditioned on O-sWL derived using <code>Con_Sample_2D()</code> set equal to the <code>$x.con</code> output.</p></dd>


<dt id="arg-pre-low">Pre_Low<a class="anchor" aria-label="anchor" href="#arg-pre-low"></a></dt>
<dd><p>Numeric vector of the indexes of the O-sWL column in <code>Data</code> containing the preceding low water level.</p></dd>


<dt id="arg-fol-low">Fol_Low<a class="anchor" aria-label="anchor" href="#arg-fol-low"></a></dt>
<dd><p>Numeric vector of the indexes of the O-sWL column in <code>Data</code> containing the following low water level.</p></dd>


<dt id="arg-thres">Thres<a class="anchor" aria-label="anchor" href="#arg-thres"></a></dt>
<dd><p>Numeric vector of length one, specifying threshold above which to apply the method. Below the threshold an observed curve with an intensity less than <code>limit</code> is randomly sampled.</p></dd>


<dt id="arg-base-line">Base_Line<a class="anchor" aria-label="anchor" href="#arg-base-line"></a></dt>
<dd><p>Numeric vector of length one, specifying water level about which to calculate the intensity. Default is the mean O-sWL.</p></dd>


<dt id="arg-limit">Limit<a class="anchor" aria-label="anchor" href="#arg-limit"></a></dt>
<dd><p>Numeric vector of length one, specifying an upper limit on the observed water level curve intensities to sample for simulated peaks less than <code>Thres</code>.</p></dd>


<dt id="arg-peak">Peak<a class="anchor" aria-label="anchor" href="#arg-peak"></a></dt>
<dd><p>Numeric vector of simulated peak water levels.</p></dd>


<dt id="arg-intensity">Intensity<a class="anchor" aria-label="anchor" href="#arg-intensity"></a></dt>
<dd><p>Numeric vector of the intensity associated with each simulated <code>Peak</code>.</p></dd>


<dt id="arg-length">Length<a class="anchor" aria-label="anchor" href="#arg-length"></a></dt>
<dd><p>Numeric vector of length one, specifying the length of time over which the water level curve is simulated before (and after) the time of the simulated peak. Total duration of the water level curve is 2*<code>Length</code>+1. Minimum is <code>5</code>. Default is <code>144</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame, where each row contains the water level curve generated for corresponding simulated peak in the <code>Peak</code> input. A vector of the intensity <code>Intensity</code> of the generated water level curve.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="Surge_Criterion.html">Surge_Criterion</a></code> <code><a href="OsWL_Intensity.html">OsWL_Intensity</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#Declustering O-sWL series</span></span></span>
<span class="r-in"><span><span class="va">S13.OsWL.Declust</span> <span class="op">=</span> <span class="fu"><a href="Decluster.html">Decluster</a></span><span class="op">(</span>Data<span class="op">=</span><span class="va">S13.Detrend.df</span><span class="op">$</span><span class="va">OsWL</span>,</span></span>
<span class="r-in"><span>                             SepCrit<span class="op">=</span><span class="fl">24</span><span class="op">*</span><span class="fl">7</span>, u<span class="op">=</span><span class="fl">0.99667</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#Use O-sWL intensity function to obtain index of preceding and following low water levels</span></span></span>
<span class="r-in"><span><span class="va">intensity</span> <span class="op">=</span> <span class="fu"><a href="OsWL_Intensity.html">OsWL_Intensity</a></span><span class="op">(</span>Data<span class="op">=</span><span class="va">S13.Detrend.df</span>,Cluster_Max<span class="op">=</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Four synthetic events</span></span></span>
<span class="r-in"><span><span class="va">sim.peaks</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.4</span>,<span class="fl">4</span>,<span class="fl">4.2</span>,<span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim.intensity</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">38</span>,<span class="fl">48</span>,<span class="fl">120</span>,<span class="fl">140</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Generating the water level curves</span></span></span>
<span class="r-in"><span><span class="va">oswl_ts_oswl</span> <span class="op">=</span> <span class="fu">WL_Curve</span><span class="op">(</span>Data <span class="op">=</span> <span class="va">S13.Detrend.df</span>,</span></span>
<span class="r-in"><span>                        Cluster_Max <span class="op">=</span> <span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span>,</span></span>
<span class="r-in"><span>                        Pre_Low <span class="op">=</span> <span class="va">intensity</span><span class="op">$</span><span class="va">Pre.Low</span>,</span></span>
<span class="r-in"><span>                        Fol_Low <span class="op">=</span> <span class="va">intensity</span><span class="op">$</span><span class="va">Fol.Low</span>,</span></span>
<span class="r-in"><span>                        Thres <span class="op">=</span> <span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">Threshold</span>, Limit <span class="op">=</span> <span class="fl">45</span>,</span></span>
<span class="r-in"><span>                        Peak <span class="op">=</span> <span class="va">sim.peaks</span>,</span></span>
<span class="r-in"><span>                        Intensity <span class="op">=</span> <span class="va">sim.intensity</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Plot the water level curves of the observed peaks</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">289</span>,</span></span>
<span class="r-in"><span>     <span class="va">S13.Detrend.df</span><span class="op">$</span><span class="va">OsWL</span><span class="op">[</span><span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">-</span><span class="fl">144</span><span class="op">)</span><span class="op">:</span></span></span>
<span class="r-in"><span>                         <span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">+</span><span class="fl">144</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>     type<span class="op">=</span><span class="st">'l'</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">-</span><span class="fl">144</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">289</span>,</span></span>
<span class="r-in"><span>        <span class="va">S13.Detrend.df</span><span class="op">$</span><span class="va">OsWL</span><span class="op">[</span><span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">-</span><span class="fl">144</span><span class="op">)</span><span class="op">:</span></span></span>
<span class="r-in"><span>                            <span class="op">(</span><span class="va">S13.OsWL.Declust</span><span class="op">$</span><span class="va">EventsMax</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">+</span><span class="fl">144</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co">#Superimpose the curves generated for the four synthetic events</span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">289</span>,<span class="va">oswl_ts_oswl</span><span class="op">$</span><span class="va">Series</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span>,col<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="WL_Curve-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Jane.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

